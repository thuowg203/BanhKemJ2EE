<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/main-layout :: layout(~{::main})}">
<body>
<main>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 style="color: var(--text-brown);" class="fw-bold">
            <i class="bi bi-people-fill me-2"></i>Quản lý Thành viên
        </h2>
    </div>

    <div class="card border-0 shadow-sm overflow-hidden rounded-4">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-dark">
            <tr>
                <th class="ps-4">Tài khoản</th>
                <th>Họ và Tên</th>
                <th>Email</th>
                <th>Số điện thoại</th>
                <th>Vai trò</th>
                <th class="text-center">Thao tác</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="u : ${users}">
                <td class="ps-4">
                    <span class="fw-bold text-primary" th:text="${u.username}"></span>
                </td>
                <td th:text="${u.fullName}"></td>
                <td th:text="${u.email}"></td>
                <td th:text="${u.phone}"></td>
                <td>
                    <span th:each="role : ${u.roles}"
                          class="badge bg-info text-dark me-1 rounded-pill fw-normal px-3"
                          th:text="${role.name}"></span>
                </td>
                <td class="text-center">
                    <a th:if="${#authentication.name != u.username}"
                       th:href="@{/admin/users/delete/{id}(id=${u.id})}"
                       class="btn btn-sm btn-outline-danger border-0 rounded-circle"
                       onclick="return confirm('Bạn chắc chắn muốn xóa thành viên này?')"
                       title="Xóa người dùng">
                        <i class="bi bi-trash3-fill"></i>
                    </a>
                    <span th:if="${#authentication.name == u.username}" class="badge bg-secondary">Đang online</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</main>
</body>
</html>