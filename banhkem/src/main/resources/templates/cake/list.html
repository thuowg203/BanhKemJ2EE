<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/main-layout :: layout(~{::main})}">
<head>
    <meta charset="UTF-8">
</head>
<body>
<main class="container py-5">
    <div class="row">
        <div class="col-md-3">
            <div class="card border-0 shadow-sm p-3 mb-4 sticky-top" style="top: 20px;">
                <h5 class="fw-bold mb-3" style="color: #3E2723;">Danh mục bánh</h5>
                <div class="list-group list-group-flush">
                    <a href="/cake" class="list-group-item list-group-item-action border-0 rounded mb-1 shadow-sm">
                        <i class="bi bi-grid-fill me-2"></i>Tất cả bánh
                    </a>
                    <a th:each="cat : ${categories}"
                       th:href="@{/cake(categoryId=${cat.id})}"
                       class="list-group-item list-group-item-action border-0 rounded mb-1"
                       th:text="${cat.name}"></a>
                </div>
            </div>
        </div>

        <div class="col-md-9">
            <div class="row g-4">
                <div th:if="${#lists.isEmpty(cakes)}" class="col-12 text-center py-5">
                    <img src="https://cdn-icons-png.flaticon.com/512/6598/6598519.png" width="100" class="opacity-50">
                    <p class="mt-3 text-muted">Hiện tại chưa có sản phẩm nào trong danh mục này.</p>
                </div>

                <div th:each="cake : ${cakes}" class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm hover-up overflow-hidden card-product">
                        <div class="position-relative">
                            <img th:src="${cake.image != null ? cake.image : '/images/default-cake.jpg'}"
                                 class="card-img-top" style="height: 220px; object-fit: cover;"
                                 onerror="this.src='https://placehold.co/400x300?text=Banh+Kem'">
                        </div>
                        <div class="card-body text-center">
                            <h6 class="fw-bold mb-2" th:text="${cake.name}"></h6>
                            <p class="text-danger fw-bold fs-5 mb-3"
                               th:text="${#numbers.formatDecimal(cake.price != null ? cake.price : 0, 0, 'COMMA', 0, 'POINT') + 'đ'}"></p>
                            <a th:href="@{/cake/{id}(id=${cake.id})}" class="btn btn-outline-primary w-100 rounded-pill">
                                <i class="bi bi-cart-plus me-1"></i> Xem chi tiết
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
</html>